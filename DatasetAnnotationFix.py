import json
import copy

file = open("train.json")

bigbitch = json.loads(file.read())
smallbitch = copy.deepcopy(bigbitch)

smallbitch["images"] = []
smallbitch["annotations"] = []
smallbitch["categories"] = []
smallbitch["licenses"] = []
birdlist = [3433, 3342, 3337, 3445, 3343, 3429, 3480, 4356, 4573, 4493, 3384, 3274, 3606, 3779, 3988, 3812, 4034, 3960, 4179, 3978, 3352, 3478, 3422, 3794, 4265, 3187, 3449, 4440, 3220, 3806, 3516, 3242, 3658, 3822, 4144, 3837, 4557, 3691, 3515, 3172, 3685, 3827, 3790, 3208, 3587, 3605, 4137, 3440, 3219, 4531, 3753, 3831, 3114, 3755, 3644, 3641, 3189, 3254, 3271, 3267, 3688, 4282, 3626, 4434, 4188, 4031, 3366, 3348, 3409, 3454, 3821, 3416, 3787, 3775, 3244, 3991, 4291, 3809, 3686, 3961, 3215, 3965, 3731, 4036, 4485, 3447, 3995, 4145, 3829, 4205, 3408, 3636, 3377, 3259, 3498, 3536, 4041, 3402, 3465, 3494, 3194, 3999, 3472, 3261, 3702, 4541, 3460, 3660, 3456, 4545, 3435, 4583, 3469, 3351, 3998, 3369, 3633, 3421, 3769, 3694, 3639, 3752, 3859, 4448, 3260, 4562, 3642, 4033, 3459, 3493, 3705, 3474, 3500, 3144, 3423, 3405, 3290, 3548, 3982, 3514, 3912, 3418, 3420, 3126, 4577, 3239, 3541, 3607, 3568, 3432, 3972, 3462, 3908, 4405, 3484, 3268, 4204, 3213, 3191, 3412, 3410, 3814, 3207, 3231, 3828, 3693,
            3483, 4288, 4409, 3964, 3692, 3287, 3704, 3177, 3601, 4490, 3482, 3253, 3201, 3273, 3463, 4479, 3210, 3233, 3211, 3983, 3214, 4363, 4133, 4182, 3651, 3393, 3212, 3128, 3914, 3807, 3596, 3441, 3505, 3226, 3258, 3635, 3394, 3490, 3218, 4366, 3404, 4369, 3499, 3119, 3458, 3770, 3751, 3113, 3235, 3367, 3232, 3810, 3632, 4412, 3237, 3246, 3468, 4346, 4548, 3994]


for cat in bigbitch["categories"]:
    if (birdlist.count(int((cat["id"]))) > 0):
        smallbitch["categories"].append(cat)


for ann in bigbitch["annotations"]:
    if (ann["category_id"] > 3110) and (ann["category_id"] < 4597):
        id = int(ann["image_id"] or 0)
        lat = int(bigbitch["images"][id]["latitude"] or 0)
        lon = int(bigbitch["images"][id]["longitude"] or 0)

        if (lat > 50 and lat < 60 and lon > -13 and lon < 3):
            smallbitch["annotations"].append(ann)
            smallbitch["images"].append(bigbitch["images"][id])


with open('birds.json', 'w') as f:
    json.dump(smallbitch, f)
